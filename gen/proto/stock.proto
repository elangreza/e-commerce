syntax = "proto3";

package gen;

option go_package = "github.com/elangreza/e-commerce/proto/gen";

message Stock {
    string product_id = 2;
    int64 quantity = 3;
}

message StockList {
    repeated Stock stocks = 1;
}

message GetStockRequest {
    repeated string product_ids = 1;
}

message ReserveStockRequest {
    repeated Stock stocks = 1;
}

message ReserveStockResponse {
    repeated int64 reserved_stock_ids = 1;
}

message ReleaseStockRequest {
    repeated int64 reserved_stock_ids = 1;
}

message ReleaseStockResponse {
    repeated int64 released_stock_ids = 1;
}

message ConfirmedStockRequest {
    repeated int64 reserved_stock_ids = 1;
}

message ConfirmedStockResponse {
    repeated int64 confirmed_stock_ids = 1;
}

service StockService {
    rpc GetStocks(GetStockRequest) returns (StockList) {}
    rpc ReserveStock(ReserveStockRequest) returns (ReserveStockResponse) {}
    rpc ReleaseStock(ReleaseStockRequest) returns (ReleaseStockResponse) {}
    rpc ConfirmedStock(ConfirmedStockRequest) returns (ConfirmedStockResponse) {}
}